<!doctype html>
<html lang="en" prefix="og: http://ogp.me/ns#">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, width=device-width">
  <meta name="description" content="Python developer who loves hacking around, learning and building cool stuff.">
  <title>Brief Intro to Django and Machine Learning</title>
  <meta property="og:title" content="Brief Intro to Django and Machine Learning">
  <meta property="og:type" content="article">
  <meta property="og:url" content="http://alephmelo.github.io/brief-intro-to-django-and-machine-learning/">
  <meta property="og:description" content="">
  <meta property="og:site_name" content="Aleph Melo">
  <meta property="article:author:username" content="Aleph Melo">
  <meta name="author" content="Aleph Melo">
  <meta name="description" content="Blog about programming/development, python, iOS and a bunch of others cool stuffs by Aleph Melo">
<meta property="article:tag" content="python">
<meta property="article:tag" content="data-science">
<meta property="article:tag" content="dev">
<meta property="article:tag" content="dev">
<meta property="article:tag" content="software">
<meta property="article:tag" content="programming">
<meta property="article:tag" content="blog">
<meta property="article:tag" content="python">
<meta name="keywords" content="python,data-science,dev, dev, software, programming, blog, python">

<link rel="stylesheet" href="/static/css/layouts/pure-min.css">
<link rel="stylesheet" href="/static/pygments.css">
<!--[if lte IE 8]>
    <link rel="stylesheet" href="/static/css/layouts/grids-responsive-old-ie-min.css">
<![endif]-->
<!--[if gt IE 8]><!-->
    <link rel="stylesheet" href="/static/css/layouts/grids-responsive-min.css">
<!--<![endif]-->  
<!--[if lte IE 8]>
    <link rel="stylesheet" href="/static/css/layouts/blog-old-ie.css">
<![endif]-->
<!--[if gt IE 8]><!-->
        <link rel="stylesheet" href="/static/css/layouts/blog.css">
    <!--<![endif]-->
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/gist-embed/2.4/gist-embed.min.js"></script>
</head>
<body>
<div id="layout" class="pure-g">
  <div class="sidebar pure-u-1 pure-u-md-1-4">
      <div class="header">
          <h1 class="brand-title"><a href="/" id="home-title">Aleph Melo</a></h1>
          <h2 class="brand-tagline">developer</h2>
          
          <nav class="nav">
              <ul class="nav-list">
                  <li class="nav-item">
                      <a class="pure-button" href="http://twitter.com/Alephbreno">Twitter</a>
                  </li>
                  <li class="nav-item">
                      <a class="pure-button" href="http://github.com/alephmelo">GitHub</a>
                  </li>
              </ul>
          </nav>
      </div>
  </div>
  <div class="content pure-u-1 pure-u-md-3-4">
  <!-- <h1 class="content-subhead">Recent posts</h1> !-->
  
  

<div class="posts">
    <section class="post">
        <header class="post-header">
            
            <h2 class="post-title">Brief Intro to Django and Machine Learning</h2>
            <div id="social-container">
            <a href="https://twitter.com/share" class="twitter-share-button" data-text="Brief Intro to Django and Machine Learning" data-via="Alephbreno" data-hashtags="dev" data-dnt="true">Tweet</a>
            <div class="fb-share-button" data-href="/brief-intro-to-django-and-machine-learning/" data-layout="button_count"></div>
            </div>
            
            <p class="post-meta">
                By 
                <a href="https://twitter.com/Alephbreno" class="post-author">Aleph Melo</a>
                 on 2016-09-09 under 
                 
                 <a class="post-tag post-tag-python" href="#">python</a>
                 
                 <a class="post-tag post-tag-data-science" href="#">data-science</a>
                 
                 <a class="post-tag post-tag-dev" href="#">dev</a>
                 
            </p>
        </header>
        
        <div class="post-description">
         
            <p>
                <h1>Table of Contents</h1>
<ul>
<li><a href="/brief-intro-to-django-and-machine-learning/#Editorial">Editorial</a></li>
<li><a href="/brief-intro-to-django-and-machine-learning/#Requirements">Requirements</a></li>
<li><a href="/brief-intro-to-django-and-machine-learning/#What is Django Anyway?">What is Django Anyway?</a></li>
<li><a href="/brief-intro-to-django-and-machine-learning/#Cool! How Does it Work?">Cool! How Does it Work?</a><ul>
<li><a href="/brief-intro-to-django-and-machine-learning/#Request Lifecycle and Django Architecture">Request Lifecycle and Django Architecture</a></li>
</ul>
</li>
<li><a href="/brief-intro-to-django-and-machine-learning/#Enough! Let&#39;s Code">Enough! Let's Code</a><ul>
<li><a href="/brief-intro-to-django-and-machine-learning/#Our Application">Our Application</a><ul>
<li><a href="/brief-intro-to-django-and-machine-learning/#Our First View">Our First View</a></li>
<li><a href="/brief-intro-to-django-and-machine-learning/#Routing Views">Routing Views</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h1>1. Editorial</h1>
<p>This article aims to provide a quick start on how to setup and understand the basics premises about the Django framework, to give you a glimpse about how things work under the hood, and a bonus feature is that we are going to build a simple machine learning feature using a classifier, one of the basics concepts of machine learning, this way in our toy example it might help you understand how a backend service interacts with the client.</p>
<h1>2. Requirements</h1>
<p>Some Python coding is always welcome, but even if you don’t have Python background but have some programming in general you should be fine too, since Python syntax is very clear and concise. Libraries that we need in order to follow this article:</p>
<ul>
<li>Numpy</li>
<li>Django</li>
<li>Scikit-learn</li>
</ul>
<h1>3. What is Django Anyway?</h1>
<p>Django is a high-level Python Web framework that encourages rapid development and clean, pragmatic design. Built by experienced developers, it takes care of much of the hassle of Web development, so you can focus on writing your app without needing to reinvent the wheel. It’s free and open source.</p>
<p>In a nutshell, Django takes care of all HTTP requests sent from clients using your app and handle the HTTP responses, that’s it. What to do and how to treat the data in the middle of this process is totally up to you, my dearest. This is what freedom looks like!</p>
<p>The framework already comes with tons of great features that we can use, like: built-in ORM (Object-Relational Mapper), powerful url dispatcher, several forms of validation, built-in template system, l10n (internationalization), cache system, auth handlers, web server for dev, awesome admin interface and so on.</p>
<h1>4. Cool! How Does it Work?</h1>
<p>For us to begin understanding how Django works first we need to understand a very common Design Pattern in web development that is called <code>MVC</code> which stands for <code>Model-View-Controller</code>. Its concepts are very simple and intuitive. The <code>Model</code> takes care of data, where your data structure will be defined. The <code>View</code> contains the elements in the user interface. The <code>Controller</code> is the bridge between the model and the view. All good so far? Great.</p>
<p>But hold your horses that’s not how it works yet. Django uses a similar version of this design pattern called <code>MVT</code> which stands for <code>Model-View-Template</code>. Whereas the <code>Model</code> is the same as in <code>MVC</code>. The <code>View</code> now defines what and how data should be represented and always return an <code>HTTP Response</code>. The <code>Template</code> renders the data itself in the format you might want (HTML, PDF, XHTML, etc).</p>
<p>Let's take a closer look on how long a request lives and the paths it may take in life.</p>
<h2>4.1. Request Lifecycle and Django Architecture</h2>
<p><div class="post-image"><img src="django-arch.png"></div>
In the image above we see clearly the path that request sent by a client might take during its life.</p>
<p>Let’s say a client enters at <code>www.example.com/index</code>, in Django the following might happen: the request comes to the URL dispatcher that it’s liked with a <code>Python</code> function (<code>View</code>), if the request needs something from the database (<code>Model</code>), the function would go there retrieve what it needs to be retrieved and finally the response would be returned to the user via <code>Template</code> a.k.a. frontend stuff like HTML. I hope this gets clearer when we got to the practical details.</p>
<h1>5. Enough! Let's Code</h1>
<p>When we start a new project using <code>django-admin startproject project_name</code> and then creating our application by running <code>python manage.py startapp app_name</code>, we end up with a structure like this:</p>
<pre><code>$ tree my_project 
my_project
├── example_app
│   ├── __init__.py
│   ├── admin.py
│   ├── apps.py
│   ├── migrations
│   │   └── __init__.py
│   ├── models.py
│   ├── tests.py
│   └── views.py
├── manage.py
└── my_project
    ├── __init__.py
    ├── settings.py
    ├── urls.py
    └── wsgi.py
</code></pre>
<p>Our project name is <code>my_project</code> and our app is <code>example_app</code>. This sctructure is awesome when you're building real world applications and should be followed, but in our toy example we're going to use a minified, single-file version of a Django application, remember all the freedom?</p>
<h2>5.1. Our Application</h2>
<p>We'll create a file called <code>hello.py</code> and put the minimum settings in it in order to run our application.</p>
<p><code data-gist-id="4cbc547111091c06861c521918942447" data-gist-line="1-33"></code></p>
<h3>5.1.1. Our First View</h3>
<p>As I said earlier, django is a master in handling http requests, so let's write our first <code>view</code> receiving a request and returning an http response. A view can be either a Python function or class in cases like class-based views, but we we'll use simple functions to create our views.</p>
<p><code data-gist-id="4cbc547111091c06861c521918942447" data-gist-line="36-40"></code></p>
<p>The code is pretty straightforward, we define a function called <code>index</code> with a parameter request and returning an <code>HttpResponse</code> object with a string, that's it! But how and when Django knows to call this view?</p>
<h3>5.1.2. Routing Views</h3>
<p>Django makes good use of regular expressions (like many others web frameworks out there) to map a certain URL to a view. If you're familiar with <code>Flask</code>, another great web framework mainly used to build APIs, Flask uses Python decorators <code>@mydecorator()</code> to map URLs. In Django, we use a variable called <code>urlpatterns</code> which can be a list or a tuple of URLs regexes and view names.</p>
<p><code data-gist-id="4cbc547111091c06861c521918942447" data-gist-line="41-46"></code></p>
<p>Let me explaing what is happening here, first we import a function called <code>url</code> from django with two arguments, the <code>regex</code> and the name of the view we defined earlier, simple, right? The <code>r</code> in front the regex string tells Python to don't interpretate escape chars, it tells this is a <code>raw</code> string, followed by <code>^</code> that marks where the line starts and a <code>$</code> telling where to end. So when a user requests for <code>www.example.com/index</code>, the regex matches the <code>/index</code> part and then calls the view related to it, in our case the Python function called <code>index</code>.</p>
<p>And lastly in need to add more settings so Django will know how to perform some command line arguments.
<code data-gist-id="4cbc547111091c06861c521918942447" data-gist-line="47-53"></code></p>

            </p>
        
        </div>
    </section>
</div>

  <div class="comments">
<div id="disqus_thread"></div>
<script>
  var disqus_config = function() { this.page.identifier = "/brief-intro-to-django-and-machine-learning"; this.page.url = "http://alephmelo.github.io/brief-intro-to-django-and-machine-learning/"; };
  (function() {
    var d = document, s = d.createElement('script');
    s.src = '//alephmelo.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  })();
</script>
<noscript>
  Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript"
    rel="nofollow">comments powered by Disqus.</a>
</noscript>
</div>

  </div>

</div>
</body>
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-73769265-1', 'auto');
  ga('send', 'pageview');

</script>

<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');
</script>

<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/pt_BR/sdk.js#xfbml=1&version=v2.5";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
</html>
